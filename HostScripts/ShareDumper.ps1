function Invoke-ShareDumper
{
    <# This function performs a recursive listing against all shares provided in a file #>
    param
    (
        [Parameter(Mandatory = $True)]
        [string]$SharePath,
        [Parameter(Mandatory = $True)]
        [string]$FilePath
    )

    Process
    {
        $sharelist = Get-Content $SharePath

        foreach ($path in $sharelist)
        {
            Write-Verbose "Parsing $path"
            if($FilePath)
            {
                $results += Get-ChildItem -ErrorAction SilentlyContinue -Recurse $path
            }
            else
            {
                Get-ChildItem -ErrorAction SilentlyContinue -Recurse $path
            }
        }
        if ($FilePath)
        {
            $results | Out-File $FilePath
        }
    }
}